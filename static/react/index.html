<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatiable" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Authorization Flow</title><script defer="defer" src="/static/react/static/js/main.9d1f56ef.js"></script><link href="/static/react/static/css/main.073c9b0a.css" rel="stylesheet"></head><body><div id="login"><h1>Learning Authorization Flow with Spotify</h1><a href="/login">Login with Spotify</a></div><div id="logged-in"><h1>Logged in with Authorization Flow</h1><button id="refresh-token">Get a new token!</button></div><script src="https://code.jquery.com/jquery-3.6.2.min.js"></script><script>function getHashParams(){let e={};for(var n,r=/([^&;=]+)=?([^&;]*)/g,o=window.location.hash.substring(1);n=r.exec(o);)e[n[1]]=decodeURIComponent(n[2]);return e}let params=getHashParams(),access_token=params.access_token,refresh_token=params.refresh_token,error=params.error;error?alert("There was an error during the authentication"):access_token?($("#login").hide(),$("#logged-in").show()):($("#login").show(),$("#logged-in").hide()),document.getElementById("refresh-token").addEventListener("click",(function(){$.ajax({url:"/refresh_token",data:{refresh_token:refresh_token}}).done((function(e){access_token=e.access_token,console.log(`new access token: ${access_token}`)}))}),!1)</script></body></html>